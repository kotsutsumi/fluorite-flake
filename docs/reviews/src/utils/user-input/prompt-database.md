# user-input/prompt-database.ts レビュー報告書

## 概要

`src/utils/user-input/prompt-database.ts` は `@clack/prompts` の `select` 関数を使用して、データベース選択のインタラクティブプロンプトを提供するユーティリティモジュールです。Create/Newコマンドでのデータベース機能を持つテンプレートに対して、ユーザーフレンドリーなデータベース選択体験を提供します。

## 主な機能

### `promptForDatabase()`
- **戻り値**: `Promise<DatabaseType | undefined>`
- **役割**: ユーザーに対してデータベースタイプの選択プロンプトを表示
- **キャンセル処理**: ユーザーがキャンセルした場合は `undefined` を返却

### データベース選択肢
1. **データーベースを使用しない**
   - 値: `"none"`
   - 説明: データーベース関連の設定を含めません
   - 用途: データベース統合が不要なケース

2. **Turso**
   - 値: `"turso"`
   - 説明: 高性能SQLiteベースのクラウドデータベース
   - 用途: 本格的なアプリケーション向け

3. **Supabase**
   - 値: `"supabase"`
   - 説明: オープンソースのPostgreSQLベースのクラウドデータベース
   - 用途: リアルタイム機能とRLS（Row Level Security）付き

## 技術実装

### 国際化対応
- `getMessages()` から `create.selectDatabasePrompt` メッセージを取得
- 多言語対応のプロンプトメッセージ表示

### エラーハンドリング
- `select` 関数の戻り値がシンボル（キャンセル）の場合の適切な処理
- 型安全な戻り値処理（`DatabaseType | undefined`）

### 依存関係
- `@clack/prompts`: プロンプトUI
- `../../commands/create/types.js`: `DatabaseType` 型定義
- `../../i18n.js`: 国際化メッセージ

## 設計の特徴

### ユーザーエクスペリエンス
- 各選択肢に詳細な説明とヒントを提供
- 開発者が用途に応じて適切なデータベースを選択できるガイダンス
- 統一されたCLIインターフェース（@clack/prompts使用）

### 型安全性
- TypeScript型定義の活用
- `DatabaseType` 型による型安全な選択肢管理
- キャンセル処理での適切な型ガード

### モジュール設計
- 単一責任の原則に従った設計
- 他のuser-inputユーティリティとの一貫性
- 再利用可能な関数設計

## 統合パターン

### Create/Newコマンドとの連携
- テンプレートがデータベース機能を持つ場合に自動実行
- バリデーション失敗時のエラーハンドリング
- キャンセル時の適切なプロセス終了

### 設定への反映
- 選択されたデータベースタイプが `ProjectConfig` に反映
- テンプレート生成時のデータベース設定適用

## 留意点

- 新しいデータベースタイプ追加時は選択肢配列の更新が必要
- 国際化メッセージファイル（i18n JSON）との連携が必要
- テンプレートのデータベース機能判定ロジックとの整合性維持が重要
- 各データベース選択肢の説明は技術的正確性と簡潔性のバランスが重要