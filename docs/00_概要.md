# Fluorite-flake プロジェクト概要

## 1. プロジェクト概要

Fluorite-flakeは、マルチフレームワーク対応のプロジェクトジェネレーター兼CLIツールです。Web、モバイル、デスクトップアプリケーションの雛形を対話的に生成し、モダンな開発環境を素早く構築できます。

### 1.1 プロジェクトの特徴

```
┌─────────────────────────────────────────────────────────────────┐
│                   Fluorite-flake アーキテクチャ                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────┐    ┌─────────────────┐    ┌──────────────┐ │
│  │   フロントエンド │    │   CLI コマンド   │    │ ダッシュボード │ │
│  │                 │    │                 │    │              │ │
│  │  ├ Next.js      │    │  ├ create       │    │  ├ TUI       │ │
│  │  ├ Expo         │    │  ├ dashboard    │    │  ├ WebSocket │ │
│  │  ├ Tauri        │    │  ├ deploy       │    │  └ REST API  │ │
│  │  └ Flutter      │    │  └ ipc          │    │              │ │
│  └─────────────────┘    └─────────────────┘    └──────────────┘ │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                        サービス統合層                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │ データベース │  │  ストレージ  │  │    認証      │          │
│  │              │  │              │  │              │          │
│  │ ├ Turso      │  │ ├ Vercel     │  │ ├ NextAuth   │          │
│  │ └ Supabase   │  │ ├ R2         │  │ ├ Clerk      │          │
│  │              │  │ ├ S3         │  │ └ Supabase   │          │
│  │              │  │ └ Supabase   │  │              │          │
│  └──────────────┘  └──────────────┘  └──────────────┘          │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.2 技術スタック

#### コア技術
- **言語**: TypeScript (ES Modules)
- **パッケージマネージャー**: pnpm/npm/yarn/bun対応
- **ビルドツール**: TypeScript Compiler (tsc)
- **Node.js**: >=20.0.0

#### 開発ツールチェーン
- **品質管理**: Biome (フォーマット・Lint統合)
- **テスティング**: Vitest (ユニット・機能・シナリオテスト)
- **E2Eテスト**: Playwright
- **Git フック**: Husky (pre-commit チェック)

#### CLI フレームワーク
- **コマンド処理**: Commander.js
- **対話インターフェース**: prompts
- **端末UI**: blessed + blessed-contrib
- **視覚効果**: chalk + ora

### 1.3 アーキテクチャ設計原則

#### 1.3.1 モジュラー設計
```
┌─────────────────────────────────────────────────────────┐
│                   モジュラー構成                        │
│                                                         │
│  generators/     commands/      services/      utils/   │
│  ┌─────────┐     ┌─────────┐    ┌─────────┐    ┌─────┐  │
│  │フレーム │     │CLI      │    │クラウド │    │共通 │  │
│  │ワーク   │ ←→  │コマンド │ ←→ │サービス │ ←→ │関数 │  │
│  │生成     │     │処理     │    │連携     │    │群   │  │
│  └─────────┘     └─────────┘    └─────────┘    └─────┘  │
│       ↕               ↕              ↕           ↕     │
│  config/        types/         ipc/         tui/       │
│  ┌─────────┐     ┌─────────┐    ┌─────────┐    ┌─────┐  │
│  │設定     │     │型定義   │    │プロセス │    │端末 │  │
│  │管理     │     │集約     │    │間通信   │    │UI   │  │
│  └─────────┘     └─────────┘    └─────────┘    └─────┘  │
└─────────────────────────────────────────────────────────┘
```

#### 1.3.2 責任分離
- **generators/**: フレームワーク固有のプロジェクト生成ロジック
- **commands/**: CLIコマンドの実装とオーケストレーション
- **services/**: 外部サービス（AWS、Vercel等）との統合
- **config/**: 設定管理とバージョン制御
- **utils/**: 再利用可能なユーティリティ関数
- **types/**: TypeScript型定義の集約

### 1.4 対応フレームワーク

#### 1.4.1 フロントエンド
```
┌─────────────────────────────────────────────────────────┐
│                 フレームワーク対応                      │
├─────────────────┬───────────────────┬───────────────────┤
│    Next.js      │       Expo        │      Tauri        │
│                 │                   │                   │
│ ├ App Router    │ ├ Expo Router     │ ├ Rust Backend   │
│ ├ TypeScript    │ ├ TypeScript      │ ├ Vite Frontend  │
│ ├ TailwindCSS   │ ├ NativeWind      │ ├ TypeScript     │
│ ├ Vercel Deploy │ ├ EAS Build       │ ├ Desktop Native │
│ └ API Routes    │ └ Native Features │ └ Cross Platform │
├─────────────────┼───────────────────┼───────────────────┤
│    Flutter      │                   │                   │
│                 │                   │                   │
│ ├ Dart          │                   │                   │
│ ├ Material UI   │                   │                   │
│ ├ State Mgmt    │                   │                   │
│ └ Multi Platform│                   │                   │
└─────────────────┴───────────────────┴───────────────────┘
```

### 1.5 統合サービス

#### 1.5.1 データベース・認証・ストレージ
```
┌─────────────────────────────────────────────────────────┐
│                 サービス統合マトリックス                 │
├─────────────────┬───────────────────┬───────────────────┤
│   データベース   │      認証         │    ストレージ      │
│                 │                   │                   │
│ ┌─────────────┐ │ ┌─────────────┐   │ ┌─────────────┐   │
│ │ Turso       │ │ │ NextAuth.js │   │ │ Vercel Blob │   │
│ │ ├ LibSQL    │ │ │ ├ OAuth2    │   │ │ ├ CDN       │   │
│ │ ├ Edge DB   │ │ │ ├ JWT       │   │ │ └ Global    │   │
│ │ └ SQLite    │ │ │ └ Session   │   │ └─────────────┘   │
│ └─────────────┘ │ └─────────────┘   │                   │
│ ┌─────────────┐ │ ┌─────────────┐   │ ┌─────────────┐   │
│ │ Supabase    │ │ │ Clerk       │   │ │ Cloudflare  │   │
│ │ ├ Postgres  │ │ │ ├ User Mgmt │   │ │ R2          │   │
│ │ ├ Auth      │ │ │ ├ Social    │   │ │ ├ S3 API    │   │
│ │ ├ Storage   │ │ │ └ MFA       │   │ │ └ Edge      │   │
│ │ └ Realtime  │ │ └─────────────┘   │ └─────────────┘   │
│ └─────────────┘ │ ┌─────────────┐   │ ┌─────────────┐   │
│                 │ │ Supabase    │   │ │ AWS S3      │   │
│                 │ │ Auth        │   │ │ ├ Bucket    │   │
│                 │ │ ├ RLS       │   │ │ ├ IAM       │   │
│                 │ │ └ Policy    │   │ │ └ CloudFront│   │
│                 │ └─────────────┘   │ └─────────────┘   │
└─────────────────┴───────────────────┴───────────────────┘
```

### 1.6 開発フロー

#### 1.6.1 プロジェクト生成フロー
```
┌─────────────────────────────────────────────────────────┐
│                プロジェクト生成フロー                   │
└─────────────────────────────────────────────────────────┘
│
├ 1. CLI起動 (fluorite-flake create)
│   │
│   ├─ 引数解析・バリデーション
│   ├─ 国際化対応・ロケール設定
│   └─ 対話モード or CLI引数モード判定
│
├ 2. プロジェクト設定収集
│   │
│   ├─ プロジェクト名・パス設定
│   ├─ フレームワーク選択 (Next.js/Expo/Tauri/Flutter)
│   ├─ データベース選択 (none/Turso/Supabase)
│   ├─ ORM選択 (Prisma/Drizzle)
│   ├─ ストレージ選択 (Vercel/R2/S3/Supabase)
│   ├─ 認証設定 (NextAuth/Clerk/Supabase)
│   └─ デプロイ設定 (Vercel/AWS/etc)
│
├ 3. 設定検証・完全性チェック
│   │
│   ├─ 必須項目の確認
│   ├─ 組み合わせ互換性チェック
│   └─ 設定サマリー表示
│
├ 4. プロジェクト生成実行
│   │
│   ├─ ベースフレームワーク生成
│   ├─ データベース統合
│   ├─ 認証システム統合
│   ├─ ストレージ統合
│   ├─ デプロイ設定
│   └─ 開発環境セットアップ
│
└ 5. 後処理・検証
    │
    ├─ 依存関係インストール
    ├─ Git初期化
    ├─ 環境変数テンプレート作成
    └─ セットアップ完了報告
```

### 1.7 品質保証戦略

#### 1.7.1 テスト階層
```
┌─────────────────────────────────────────────────────────┐
│                  テスト戦略ピラミッド                    │
│                                                         │
│                     ┌─────────────┐                     │
│                     │     E2E     │ (Playwright)        │
│                     │ ブラウザ自動化│                   │
│                     └─────────────┘                     │
│                                                         │
│                 ┌─────────────────────┐                 │
│                 │      Scenario       │ (Vitest)        │
│                 │  シナリオテスト      │                 │
│                 └─────────────────────┘                 │
│                                                         │
│             ┌─────────────────────────────┐             │
│             │       Functional           │ (Vitest)     │
│             │     機能テスト              │             │
│             └─────────────────────────────┘             │
│                                                         │
│         ┌─────────────────────────────────────┐         │
│         │            Unit Tests              │ (Vitest) │
│         │          ユニットテスト             │         │
│         └─────────────────────────────────────┘         │
└─────────────────────────────────────────────────────────┘
```

#### 1.7.2 品質ゲート
- **pre-commit**: Biome format + lint
- **CI/CD**: 全テスト実行 + ビルド検証
- **リリース**: シナリオテスト完全実行

### 1.8 パッケージ情報

| 項目 | 値 |
|------|-----|
| **パッケージ名** | `fluorite-flake` |
| **バージョン** | `0.4.6` |
| **エントリーポイント** | `dist/cli.js` |
| **エクスポート** | `dist/index.js` |
| **Node.js要件** | `>=20.0.0` |
| **モジュール形式** | ES Modules |
| **ライセンス** | MIT |

### 1.9 次章への案内

- **[01_プロジェクト構造](./01_プロジェクト構造.md)**: ディレクトリ構造と各モジュールの詳細
- **[02_CLIアーキテクチャ](./02_CLIアーキテクチャ.md)**: CLIコマンドシステムの実装
- **[03_ジェネレーター設計](./03_ジェネレーター設計.md)**: フレームワーク別生成ロジック
- **[04_ダッシュボード機能](./04_ダッシュボード機能.md)**: マルチサービスダッシュボード
- **[05_テスト戦略](./05_テスト戦略.md)**: テスト構成と実行方法

---

*このドキュメントは Fluorite-flake v0.4.6 時点の情報に基づいています。*