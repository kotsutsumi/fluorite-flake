# Fluorite Flake公式ドキュメント実装プラン

## プラン概要

**プラン作成日時**: 2025-10-09 07:46:54
**プラン策定者**: Claude Code (plan フェーズ)
**対象ブランチ**: feature/nextra-docs-i18n
**調査ベース**: docs/investigate/investigate_20251009_074158.md

## 📋 実装目標

web下のNextraで作成されたFluorite Flake公式ドキュメントに以下を実装：

1. **fluorite-flake-logo.pngの適用** - ナビゲーションバーでのロゴ使用
2. **日本語・英語の国際化（i18n）機能** - App Router対応の完全なi18n実装
3. **Fluorite-Flakeブランディング統一** - Nextraデフォルトからの脱却

## 🎯 実装方針

### 段階的実装アプローチ

調査結果に基づき、4段階での段階的実装を採用

### 技術的判断

- **App Router対応**: Nextra 4.6.0のApp Router i18n実装を採用
- **最小限の変更**: 既存コンテンツ構造を維持しつつ拡張
- **漸進的改善**: 段階的な実装で安全性確保

## 📊 現状分析

### ✅ 既に完了している項目

- ロゴファイル配置 (`web/public/fluorite-flake-logo.png`)
- コンテンツのFluorite-Flake化 (`src/content/index.mdx`)
- 基本的なプロジェクト構造

### ❌ 未実装項目

- ナビゲーションバーのブランディング
- i18n設定（完全未実装）
- App Router対応のi18n middleware
- 言語別コンテンツファイル

### 🔧 技術スタック確認

- Next.js: 15.5.4 (最新版)
- Nextra: 4.6.0 (最新版)
- App Router: 有効
- TypeScript: 5系

## 📋 詳細実装計画

### フェーズ1: Fluorite-Flakeブランディング適用 (優先度: 🔴 高)

#### 目標

Nextraデフォルトブランディングを完全にFluorite-Flakeに変更

#### 実装タスク

1. **layout.jsx更新**
   - メタデータ更新（title, description, applicationName）
   - ナビゲーションバーロゴ適用
   - フッター情報更新
   - GitHubリポジトリリンク修正

2. **ブランディング統一**
   - サイトタイトル: "Nextra" → "Fluorite-Flake"
   - 説明文更新
   - ソーシャルメディア設定更新

#### 作業ファイル

- `web/src/app/layout.jsx` (修正)

#### 期待結果

- Fluorite-Flakeロゴがナビゲーションバーに表示
- すべてのメタデータがFluorite-Flake用に更新
- 統一されたブランディング

### フェーズ2: i18n基盤実装 (優先度: 🔴 高)

#### 目標

App Router対応の完全なi18n機能実装

#### 実装タスク

1. **Next.js設定更新**
   - `next.config.mjs`にi18n設定追加
   - ロケール設定: en-US, ja-JP
   - デフォルトロケール: en-US

2. **Middleware実装**
   - `middleware.js`作成
   - App Router用i18nルーティング
   - 言語検出とリダイレクト

3. **基本機能確認**
   - URL生成確認 (`/`, `/ja-JP/`)
   - 言語切替機能動作確認
   - ナビゲーション確認

#### 作業ファイル

- `web/next.config.mjs` (修正)
- `web/middleware.js` (新規作成)

#### 期待結果

- `/en-US/`, `/ja-JP/` でのアクセス可能
- 自動言語検出機能
- 言語切替UI表示

### フェーズ3: コンテンツ多言語化 (優先度: 🟡 中)

#### 目標

既存コンテンツの日英対応完了

#### 実装タスク

1. **メインコンテンツの言語別分割**
   - `index.mdx` → `index.en-US.mdx`, `index.ja-JP.mdx`
   - `get-started.mdx` → 言語別分割
   - 各featuresページの言語別対応

2. **メタデータの多言語化**
   - `_meta.js` → `_meta.en-US.js`, `_meta.ja-JP.js`
   - ナビゲーション項目の翻訳
   - ページタイトルの多言語化

3. **日本語コンテンツ作成**
   - 既存英語コンテンツの日本語翻訳
   - 日本語特有の表現調整
   - 技術用語の適切な翻訳

#### 作業ファイル

- `web/src/content/index.en-US.mdx` (新規作成)
- `web/src/content/index.ja-JP.mdx` (新規作成)
- `web/src/content/_meta.en-US.js` (新規作成)
- `web/src/content/_meta.ja-JP.js` (新規作成)
- 他MDXファイル群の言語別分割

#### 期待結果

- 完全な日英バイリンガル対応
- 自然な日本語コンテンツ
- 一貫した翻訳品質

### フェーズ4: 高度な機能 (優先度: 🟢 低)

#### 目標

SEO最適化とパフォーマンス向上

#### 実装タスク

1. **SEO最適化**
   - 言語固有のメタタグ
   - hreflang属性設定
   - 構造化データ追加

2. **パフォーマンス最適化**
   - 画像最適化
   - バンドルサイズ最適化
   - 読み込み速度改善

#### 期待結果

- 優秀なSEOスコア
- 高速な表示速度
- 良好なユーザーエクスペリエンス

## 🧪 テスト戦略

### テスト層別戦略

#### ビルド・設定テスト (必須)

- `npm run build` 成功確認
- `npm run dev` 起動確認
- i18n設定の動作確認

#### 機能テスト (重要)

- 日英言語切替の動作確認
- ナビゲーション表示確認
- ロゴ表示確認
- URLルーティング確認 (`/`, `/en-US/`, `/ja-JP/`)

#### コンテンツテスト (基本)

- MDXファイル表示確認
- メタデータ適用確認
- リンク動作確認

### テスト実行環境

- **開発環境**: `npm run dev` での動作確認
- **本番環境**: `npm run build && npm run start` での確認

### 各フェーズ後の必須テスト

1. **フェーズ1後**: ブランディング表示確認
2. **フェーズ2後**: i18n基本機能確認
3. **フェーズ3後**: 全コンテンツ表示確認
4. **フェーズ4後**: 総合的な動作確認

## ⚠️ リスク分析と対策

### 高リスク項目

#### 1. App Router + Nextra i18n互換性問題

**リスク詳細**: Nextra 4.6.0のApp Routerでのi18n実装が不安定
**対策**:

- 段階的実装による早期問題発見
- 公式ドキュメント準拠の実装
- フォールバック戦略準備

#### 2. SEOへの影響

**リスク詳細**: URL構造変更によるSEO影響
**対策**:

- 適切なhreflang設定
- メタデータ最適化
- 段階的なURL移行

#### 3. 既存リンクの破損

**リスク詳細**: i18n実装による既存リンク切れ
**対策**:

- リダイレクト設定
- 段階的移行計画
- リンク確認テスト実施

### 中リスク項目

#### 1. ビルドエラー

**対策**: 各段階での詳細テスト実施

#### 2. パフォーマンス低下

**対策**: 最適化実装とモニタリング

### リスク軽減戦略

- **段階的実装**: フェーズ別の実装と検証
- **テスト重視**: 各段階でのテスト実施
- **バックアップ**: 実装前の状態保存
- **ロールバック計画**: 問題発生時の復旧手順

## 📁 ファイル変更計画詳細

### 新規作成ファイル

```
web/middleware.js                     # App Router用i18n middleware
web/src/content/index.en-US.mdx       # 英語版メインページ
web/src/content/index.ja-JP.mdx       # 日本語版メインページ
web/src/content/_meta.en-US.js        # 英語版メタデータ
web/src/content/_meta.ja-JP.js        # 日本語版メタデータ
web/src/content/get-started.en-US.mdx # 英語版開始ガイド
web/src/content/get-started.ja-JP.mdx # 日本語版開始ガイド
```

### 修正ファイル

```
web/next.config.mjs                   # i18n設定追加
web/src/app/layout.jsx                # Fluorite-Flakeブランディング適用
```

### 段階的移行ファイル

```
web/src/content/features/*.mdx        # フェーズ3で言語別分割
web/src/content/themes/*.mdx          # フェーズ3で言語別分割
```

## 🚀 実装スケジュール

### 推奨実装順序

1. **Day 1**: フェーズ1実装とテスト
2. **Day 2**: フェーズ2実装とテスト
3. **Day 3-4**: フェーズ3実装とテスト
4. **Day 5**: フェーズ4実装と最終テスト

### マイルストーン

- **M1**: Fluorite-Flakeブランディング完了
- **M2**: 基本i18n機能完了
- **M3**: 全コンテンツ多言語化完了
- **M4**: 最適化とSEO対応完了

## 🎯 成功基準

### 機能面

- ✅ Fluorite-Flakeロゴがナビゲーションに表示
- ✅ 日英言語切替が正常動作
- ✅ 全コンテンツが両言語で表示
- ✅ SEOスコア向上

### 技術面

- ✅ ビルドエラーなし
- ✅ パフォーマンス劣化なし
- ✅ App Router正常動作
- ✅ i18nルーティング正常動作

### 品質面

- ✅ 自然な日本語翻訳
- ✅ 一貫したブランディング
- ✅ 使いやすいUX
- ✅ 保守性の高いコード

## 📝 実装後の継続作業

### メンテナンス計画

- 定期的なNextra・Next.jsアップデート
- コンテンツの継続的な更新
- 翻訳品質の継続的改善

### 拡張計画

- 追加言語サポート検討
- 高度なSEO機能追加
- コミュニティ貢献者向けガイド作成

## 🎉 プラン完了

このプランに基づき、段階的かつ安全にFluorite Flake公式ドキュメントの国際化とブランディング統一を実現します。

各フェーズの実装完了後は必ずテストを実施し、問題があれば即座に対応することで、高品質なドキュメントサイトを構築します。

---

**プラン策定完了**: 2025-10-09 07:46:54
**次のアクション**: IMPLEMENTフェーズでの段階的実装開始
**ステータス**: DONE
