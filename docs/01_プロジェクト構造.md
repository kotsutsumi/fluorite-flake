# Fluorite-flake プロジェクト構造

## 1. 全体ディレクトリ構造

```
fluorite-flake/
├── src/                          # ソースコード（TypeScript）
│   ├── cli.ts                    # CLIエントリーポイント
│   ├── index.ts                  # ライブラリエクスポート
│   ├── commands/                 # CLIコマンド実装
│   ├── config/                   # 設定管理
│   ├── dashboard/                # ダッシュボードオーケストレーター
│   ├── generators/               # フレームワーク別ジェネレーター
│   ├── ipc/                      # プロセス間通信
│   ├── services/                 # サービスアダプター
│   ├── tauri/                    # Tauriサイドカー
│   ├── templates/                # テンプレートファイル
│   ├── tui/                      # ターミナルUI
│   ├── types/                    # TypeScript型定義
│   └── utils/                    # ユーティリティ関数
├── test/                         # テストファイル
│   ├── unit/                     # ユニットテスト
│   ├── functional/               # 機能テスト
│   ├── scenario/                 # シナリオテスト
│   ├── e2e/                      # E2Eテスト
│   └── helpers/                  # テストヘルパー
├── docs/                         # ドキュメント
├── scripts/                      # ビルドスクリプト
├── dist/                         # ビルド出力（Git除外）
├── package.json                  # パッケージ設定
├── tsconfig.json                 # TypeScript設定
├── biome.json                    # Biome設定
├── vitest.config.ts              # Vitest設定
└── playwright.config.ts          # Playwright設定
```

## 2. src/ ディレクトリ詳細

### 2.1 エントリーポイント

```
src/
├── cli.ts        # CLIアプリケーションのメインエントリー
└── index.ts      # ライブラリとしての公開API
```

#### cli.ts - CLIエントリーポイント
```typescript
┌─────────────────────────────────────────────────────────┐
│                    CLI構成概要                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. Commander.js設定                                    │
│     ├ グローバルオプション（--locale）                   │
│     ├ createコマンド（プロジェクト生成）                 │
│     ├ dashboardコマンド（サービス監視）                  │
│     ├ deployコマンド（Cloudflareデプロイ）               │
│     ├ r2コマンド（R2バケット管理）                       │
│     ├ logsコマンド（ログ監視）                          │
│     ├ ipcコマンド（プロセス間通信）                      │
│     └ tuiコマンド（TUIダッシュボード・非推奨）            │
│                                                         │
│  2. 国際化対応                                          │
│     ├ 早期ロケール検出                                   │
│     ├ i18n設定適用                                      │
│     └ preActionフックでの再設定                          │
│                                                         │
│  3. 引数解析・バリデーション                             │
│     ├ pnpm '--' セパレータ処理                          │
│     ├ 必須引数の検証                                     │
│     └ 設定の互換性チェック                               │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

#### index.ts - ライブラリAPI
- 外部利用者向けの公開API
- 主要な型定義と関数の再エクスポート
- プログラマティックな利用をサポート

### 2.2 commands/ - コマンド実装

```
src/commands/
├── create/                       # プロジェクト生成コマンド
│   ├── index.ts                  # エクスポート集約
│   ├── types.ts                  # ProjectConfig型定義
│   ├── create-project.ts         # メイン生成ロジック
│   ├── generate-framework-project.ts  # フレームワーク生成
│   ├── run-project-generation.ts # 生成実行処理
│   ├── is-config-complete.ts     # 設定完全性チェック
│   ├── get-auth-text.ts          # 認証設定表示
│   └── get-deployment-text.ts    # デプロイ設定表示
├── dashboard.ts                  # Cloudflareダッシュボード
├── multi-dashboard.ts            # マルチサービスダッシュボード
├── tui-dashboard.ts              # TUIダッシュボード
└── ipc.ts                        # プロセス間通信コマンド
```

#### 2.2.1 create/ サブディレクトリ構造
```
┌─────────────────────────────────────────────────────────┐
│                  createコマンドフロー                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  create-project.ts                                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 1. 設定収集（対話 or CLI引数）                       │ │
│  │ 2. is-config-complete で完全性チェック              │ │
│  │ 3. run-project-generation で実行                    │ │
│  └─────────────────────────────────────────────────────┘ │
│           │                              │               │
│           ▼                              ▼               │
│  generate-framework-project.ts    get-auth-text.ts      │
│  ┌─────────────────────────────┐   get-deployment-text.ts│
│  │ フレームワーク固有の        │                         │
│  │ 生成ロジック呼び出し        │                         │
│  │                             │                         │
│  │ ├ Next.js                   │                         │
│  │ ├ Expo                      │                         │
│  │ ├ Tauri                     │                         │
│  │ └ Flutter                   │                         │
│  └─────────────────────────────┘                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.3 config/ - 設定管理

```
src/config/
├── framework-configs/            # フレームワーク設定
│   ├── index.ts                  # エクスポート集約
│   ├── types.ts                  # 設定型定義
│   ├── frameworks.ts             # フレームワーク設定
│   ├── database-configs.ts       # データベース設定
│   ├── storage-configs.ts        # ストレージ設定
│   └── helpers.ts                # 設定ヘルパー関数
└── package-versions/             # パッケージバージョン管理
    ├── index.ts                  # エクスポート集約
    ├── package-versions.ts       # バージョン定義
    ├── version-groups.ts         # バージョングループ
    ├── categories.ts             # カテゴリ分類
    └── helpers.ts                # バージョンヘルパー
```

#### 2.3.1 設定管理アーキテクチャ
```
┌─────────────────────────────────────────────────────────┐
│                  設定管理システム                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  framework-configs/                                     │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ フレームワーク毎の設定テンプレート                   │ │
│  │                                                     │ │
│  │ frameworks.ts                                       │ │
│  │ ┌─────────────────────────────────────────────────┐ │ │
│  │ │ const FRAMEWORK_CONFIGS = {                     │ │ │
│  │ │   nextjs: {                                     │ │ │
│  │ │     name: "Next.js",                            │ │ │
│  │ │     dependencies: [...],                        │ │ │
│  │ │     devDependencies: [...],                     │ │ │
│  │ │     scripts: {...},                             │ │ │
│  │ │     supportedDatabases: ["turso", "supabase"],  │ │ │
│  │ │     supportedAuth: ["nextauth", "clerk"]        │ │ │
│  │ │   },                                            │ │ │
│  │ │   // ... 他のフレームワーク                      │ │ │
│  │ │ }                                               │ │ │
│  │ └─────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  package-versions/                                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ NPMパッケージのバージョン一元管理                    │ │
│  │                                                     │ │
│  │ version-groups.ts                                   │ │
│  │ ┌─────────────────────────────────────────────────┐ │ │
│  │ │ export const VERSION_GROUPS = {                 │ │ │
│  │ │   react: "^18.3.1",                            │ │ │
│  │ │   typescript: "^5.6.3",                        │ │ │
│  │ │   nextjs: "^14.2.13",                          │ │ │
│  │ │   tailwind: "^3.4.12"                          │ │ │
│  │ │ }                                               │ │ │
│  │ └─────────────────────────────────────────────────┘ │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.4 generators/ - フレームワーク別ジェネレーター

```
src/generators/
├── next-generator.ts             # Next.jsプロジェクト生成
├── expo-generator.ts             # Expoプロジェクト生成
├── tauri-generator.ts            # Tauriプロジェクト生成
├── flutter-generator.ts          # Flutterプロジェクト生成
├── monorepo-generator.ts         # モノレポ生成
├── database-generator.ts         # データベース統合
├── auth-generator.ts             # 認証システム統合
├── storage-generator/            # ストレージ統合
│   ├── index.ts                  # エクスポート統合
│   ├── setupStorage.ts           # メイン関数
│   ├── constants/
│   │   └── envTargetFiles.ts     # 環境変数ファイルリスト
│   └── helpers/                  # プロバイダー別ヘルパー
│       ├── setupVercelBlob.ts
│       ├── setupAwsS3.ts
│       ├── setupCloudflareR2.ts
│       ├── setupSupabaseStorage.ts
│       ├── ensureSupabaseClient.ts
│       ├── createStorageApiRoutes.ts
│       ├── createUploadComponent.ts
│       ├── writeStorageLib.ts
│       └── appendEnv.ts
├── deployment-generator.ts       # デプロイ設定
└── storybook-generator/           # Storybook統合
    ├── index.ts                  # エクスポート統合
    ├── setupStorybook.ts         # メイン関数
    └── helpers/                  # ヘルパー関数群
        ├── createStorybookConfig.ts
        ├── createStorybookMain.ts
        ├── createStorybookPreview.ts
        ├── createStorybookManager.ts
        ├── createExampleStories.ts
        ├── setupStorybookScripts.ts
        └── createStorybookTests.ts
```

#### 2.4.1 ジェネレーター階層
```
┌─────────────────────────────────────────────────────────┐
│                 ジェネレーター階層                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ベースフレームワークジェネレーター                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                                                     │ │
│  │ next-generator.ts   expo-generator.ts               │ │
│  │      │                    │                        │ │
│  │      ├ package.json       ├ app.config.js          │ │
│  │      ├ tsconfig.json      ├ metro.config.js        │ │
│  │      ├ tailwind.config    ├ babel.config.js        │ │
│  │      └ Next設定           └ Expo設定               │ │
│  │                                                     │ │
│  │ tauri-generator.ts  flutter-generator.ts            │ │
│  │      │                    │                        │ │
│  │      ├ tauri.conf.json    ├ pubspec.yaml           │ │
│  │      ├ Cargo.toml         ├ analysis_options.yaml  │ │
│  │      ├ main.rs            └ Flutter設定            │ │
│  │      └ Tauri設定                                   │ │
│  └─────────────────────────────────────────────────────┘ │
│                           │                             │
│                           ▼                             │
│  統合ジェネレーター                                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                                                     │ │
│  │ database-generator.ts                               │ │
│  │ ├ Turso統合（Drizzle/Prisma）                       │ │
│  │ └ Supabase統合（クライアント設定）                   │ │
│  │                                                     │ │
│  │ auth-generator.ts                                   │ │
│  │ ├ NextAuth.js設定                                   │ │
│  │ ├ Clerk統合                                         │ │
│  │ └ Supabase Auth                                     │ │
│  │                                                     │ │
│  │ storage-generator/                                  │ │
│  │ ├ setupVercelBlob.ts                               │ │
│  │ ├ setupCloudflareR2.ts                             │ │
│  │ ├ setupAwsS3.ts                                    │ │
│  │ ├ setupSupabaseStorage.ts                          │ │
│  │ └ 共通ヘルパー（API・コンポーネント生成）            │ │
│  │                                                     │ │
│  │ deployment-generator.ts                             │ │
│  │ ├ Vercel設定                                        │ │
│  │ ├ AWS設定                                           │ │
│  │ └ Docker設定                                        │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.5 services/ - サービスアダプター

```
src/services/
├── index.ts                      # エクスポート集約
├── base-service-adapter.ts       # ベースアダプター定義
├── service-factory.ts            # アダプターファクトリー
└── adapters/                     # 個別サービスアダプター
    ├── aws-adapter.ts            # AWS統合
    ├── vercel-adapter.ts         # Vercel統合
    ├── supabase-adapter.ts       # Supabase統合
    ├── turso-adapter.ts          # Turso統合
    ├── github-adapter.ts         # GitHub統合
    └── cloudflare-adapter.ts     # Cloudflare統合
```

#### 2.5.1 サービスアダプターアーキテクチャ
```
┌─────────────────────────────────────────────────────────┐
│                サービスアダプター構造                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  base-service-adapter.ts                                │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ interface ServiceAdapter {                          │ │
│  │   connect(): Promise<void>                          │ │
│  │   disconnect(): Promise<void>                       │ │
│  │   getDashboardData(): Promise<ServiceDashboardData> │ │
│  │   getMetrics(): Promise<ServiceMetrics>             │ │
│  │   executeAction(): Promise<ActionResult>            │ │
│  │   getHealthStatus(): Promise<HealthStatus>          │ │
│  │ }                                                   │ │
│  └─────────────────────────────────────────────────────┘ │
│                           │                             │
│                           ▼                             │
│  service-factory.ts                                     │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ export function createServiceAdapter(               │ │
│  │   type: ServiceType,                                │ │
│  │   config: ServiceConfig                             │ │
│  │ ): ServiceAdapter {                                 │ │
│  │   switch(type) {                                    │ │
│  │     case 'aws': return new AWSAdapter(config)       │ │
│  │     case 'vercel': return new VercelAdapter(config) │ │
│  │     // ...                                          │ │
│  │   }                                                 │ │
│  │ }                                                   │ │
│  └─────────────────────────────────────────────────────┘ │
│                           │                             │
│                           ▼                             │
│  adapters/                                              │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ 各サービス固有の実装                                 │ │
│  │                                                     │ │
│  │ ├ aws-adapter.ts     ── EC2、S3、Lambda統合         │ │
│  │ ├ vercel-adapter.ts  ── デプロイ、プロジェクト管理   │ │
│  │ ├ supabase-adapter.ts── DB、Auth、Storage統合       │ │
│  │ ├ turso-adapter.ts   ── LibSQL、Edge DB統合         │ │
│  │ ├ github-adapter.ts  ── リポジトリ、Actions統合     │ │
│  │ └ cloudflare-adapter.ts── Workers、R2、Pages統合    │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.6 tui/ - ターミナルUI

```
src/tui/
├── dashboard.ts                  # メインダッシュボード（非推奨）
├── multi-service-dashboard.ts    # マルチサービスダッシュボード
├── components/                   # TUIコンポーネント
│   └── base-widget.ts            # ベースウィジェット
└── service-dashboards/           # サービス別ダッシュボード
    ├── aws-dashboard.ts          # AWS TUI
    ├── vercel-dashboard.ts       # Vercel TUI
    ├── supabase-dashboard.ts     # Supabase TUI
    ├── turso-dashboard.ts        # Turso TUI
    ├── github-dashboard.ts       # GitHub TUI
    └── cloudflare-dashboard.ts   # Cloudflare TUI
```

### 2.7 ipc/ - プロセス間通信

```
src/ipc/
├── index.ts                      # エクスポート集約
├── ipc-server.ts                 # IPCサーバー実装
├── ipc-client.ts                 # IPCクライアント実装
└── ipc-integration.ts            # 統合レイヤー
```

### 2.8 templates/ - テンプレートファイル

```
src/templates/
├── template-map.json             # テンプレートマッピング
├── expo/                         # Expoテンプレート
├── flutter/                      # Flutterテンプレート
├── nextjs/                       # Next.jsテンプレート
├── tauri/                        # Tauriテンプレート
└── shared/                       # 共通テンプレート
```

#### 2.8.1 テンプレートシステム
```
┌─────────────────────────────────────────────────────────┐
│                テンプレートシステム                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  template-map.json                                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ {                                                   │ │
│  │   "nextjs": {                                       │ │
│  │     "base": "nextjs/base/",                         │ │
│  │     "auth": {                                       │ │
│  │       "nextauth": "nextjs/auth/nextauth/",          │ │
│  │       "clerk": "nextjs/auth/clerk/"                 │ │
│  │     },                                              │ │
│  │     "database": {                                   │ │
│  │       "turso": "nextjs/database/turso/",            │ │
│  │       "supabase": "nextjs/database/supabase/"       │ │
│  │     }                                               │ │
│  │   }                                                 │ │
│  │ }                                                   │ │
│  └─────────────────────────────────────────────────────┘ │
│                           │                             │
│                           ▼                             │
│  フレームワーク別テンプレート                            │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                                                     │ │
│  │ nextjs/                                             │ │
│  │ ├── base/                                           │ │
│  │ │   ├── package.json.template                       │ │
│  │ │   ├── tsconfig.json.template                      │ │
│  │ │   ├── tailwind.config.ts.template                 │ │
│  │ │   └── app/                                        │ │
│  │ │       ├── layout.tsx.template                     │ │
│  │ │       └── page.tsx.template                       │ │
│  │ ├── auth/                                           │ │
│  │ │   ├── nextauth/                                   │ │
│  │ │   └── clerk/                                      │ │
│  │ └── database/                                       │ │
│  │     ├── turso/                                      │ │
│  │     └── supabase/                                   │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.9 types/ - 型定義

```
src/types/
├── dashboard-types.ts            # ダッシュボード型
├── event-types.ts                # イベント型
└── rpc-types.ts                  # RPC型
```

### 2.10 utils/ - ユーティリティ

```
src/utils/
├── auth-types.ts                 # 認証型定義
├── cli-utils.ts                  # CLI共通関数
├── download.ts                   # ファイルダウンロード
├── env-file.ts                   # 環境変数ファイル操作
├── error-types.ts                # エラー型定義
├── file-generation.ts            # ファイル生成ユーティリティ
├── i18n.ts                       # 国際化対応
├── logger.ts                     # ログ出力
├── package-json.ts               # package.json操作
├── project-structure.ts          # プロジェクト構造操作
├── slugify.ts                    # 文字列スラッグ化
├── spinner-manager.ts            # スピナー管理
├── template-reader.ts            # テンプレート読み込み
├── wrangler-dashboard.ts         # Wranglerダッシュボード
└── cloud/                        # クラウド関連ユーティリティ
    ├── index.ts                  # エクスポート集約
    ├── types.ts                  # クラウド型定義
    ├── errors.ts                 # クラウドエラー型
    ├── cli-provisioner.ts        # CLIプロビジョナー
    ├── real-provisioner.ts       # 本番プロビジョナー
    └── mock-provisioner.ts       # モックプロビジョナー
```

## 3. test/ ディレクトリ構造

```
test/
├── helpers/                      # テストヘルパー
│   ├── cli-runner.ts             # CLI実行ヘルパー
│   ├── global-setup.ts           # グローバルセットアップ
│   ├── project-generator.ts      # プロジェクト生成ヘルパー
│   └── temp-dir.ts               # 一時ディレクトリ管理
├── unit/                         # ユニットテスト
│   ├── commands/                 # コマンドテスト
│   ├── config/                   # 設定テスト
│   ├── generators/               # ジェネレーターテスト
│   ├── services/                 # サービステスト
│   ├── tauri/                    # Tauriテスト
│   └── utils/                    # ユーティリティテスト
├── functional/                   # 機能テスト
│   └── cli/                      # CLIテスト
│       ├── create.test.ts
│       ├── list.test.ts
│       └── version.test.ts
├── scenario/                     # シナリオテスト
│   ├── nextjs/                   # Next.jsシナリオ
│   ├── expo/                     # Expoシナリオ
│   ├── tauri/                    # Tauriシナリオ
│   └── flutter/                  # Flutterシナリオ
└── e2e/                          # E2Eテスト
    └── nextjs/                   # Next.js E2E
        ├── auth.e2e.test.ts
        ├── content.e2e.test.ts
        ├── organization.e2e.test.ts
        ├── storage.e2e.test.ts
        ├── users.e2e.test.ts
        ├── fixtures/
        └── utils.ts
```

### 3.1 テスト階層の責任
```
┌─────────────────────────────────────────────────────────┐
│                   テスト責任分離                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  unit/                                                  │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ • 個別関数・クラスの単体テスト                       │ │
│  │ • モック・スタブを活用した分離テスト                 │ │
│  │ • 高速実行（<100ms/test）                           │ │
│  │ • カバレッジ目標: 90%以上                           │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  functional/                                            │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ • CLIコマンドの機能テスト                           │ │
│  │ • 実際のファイル生成を検証                           │ │
│  │ • テンポラリディレクトリを使用                       │ │
│  │ • 実行時間: 数秒〜数十秒                             │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  scenario/                                              │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ • エンドツーエンドのプロジェクト生成                 │ │
│  │ • 実際のコマンド実行 + 依存関係インストール          │ │
│  │ • 生成物の起動確認（pnpm dev等）                    │ │
│  │ • 実行時間: 数分（重いため選択的実行）               │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  e2e/                                                   │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ • ブラウザ自動化によるアプリテスト                   │ │
│  │ • Playwrightによるユーザーシナリオ                  │ │
│  │ • 認証・CRUD・ストレージ機能の検証                   │ │
│  │ • 実行時間: 数分〜数十分                             │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 4. 設定ファイル概要

### 4.1 主要設定ファイル

| ファイル | 目的 | 主要設定 |
|----------|------|----------|
| `package.json` | Node.jsパッケージ設定 | 依存関係、スクリプト、メタデータ |
| `tsconfig.json` | TypeScript設定 | コンパイル設定、モジュール解決 |
| `biome.json` | Biome設定 | フォーマット・Lint ルール |
| `vitest.config.ts` | Vitest設定 | テスト実行、プロジェクト分割 |
| `playwright.config.ts` | Playwright設定 | ブラウザテスト、タイムアウト |

### 4.2 設定管理戦略
```
┌─────────────────────────────────────────────────────────┐
│                   設定管理戦略                          │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  レイヤー分離                                           │
│  ┌─────────────────────────────────────────────────────┐ │
│  │                                                     │ │
│  │  開発環境設定                                       │ │
│  │  ├ biome.json     ── フォーマット・Lintルール       │ │
│  │  ├ tsconfig.json  ── TypeScriptコンパイル設定       │ │
│  │  └ vitest.config  ── テスト実行設定                 │ │
│  │                                                     │ │
│  │  アプリケーション設定                               │ │
│  │  ├ src/config/framework-configs/ ── フレームワーク  │ │
│  │  ├ src/config/package-versions/  ── パッケージ      │ │
│  │  └ src/templates/                ── テンプレート    │ │
│  │                                                     │ │
│  │  運用設定                                           │ │
│  │  ├ scripts/       ── ビルドスクリプト               │ │
│  │  ├ .github/       ── CI/CD設定                      │ │
│  │  └ package.json   ── NPM設定・スクリプト            │ │
│  │                                                     │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 5. モジュール間の依存関係

```
┌─────────────────────────────────────────────────────────┐
│                   依存関係ダイアグラム                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│         cli.ts                                          │
│           │                                             │
│           ▼                                             │
│      commands/                                          │
│     ┌─────────┐                                         │
│     │ create/ │ ──────┐                                 │
│     └─────────┘       │                                 │
│     ┌─────────┐       ▼                                 │
│     │dashboard│ ─► generators/ ◄── config/              │
│     └─────────┘       │    ▲                            │
│     ┌─────────┐       │    │                            │
│     │  ipc/   │ ──────┘    │                            │
│     └─────────┘            │                            │
│           │                │                            │
│           ▼                │                            │
│      services/ ────────────┘                            │
│           │                                             │
│           ▼                                             │
│        tui/ ◄── utils/                                  │
│                   │                                     │
│                   ▼                                     │
│               templates/                                │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5.1 依存関係ルール
1. **上位から下位への依存**: CLI → Commands → Generators → Utils
2. **循環依存の禁止**: 同レベル間の相互依存を避ける
3. **設定の一元化**: config/ は他モジュールから参照される
4. **ユーティリティの共有**: utils/ は全モジュールから利用可能

---

*次章: [02_CLIアーキテクチャ](./02_CLIアーキテクチャ.md)*