# Repository Guidelines

## 参照

CLAUDE.mdの内容も参照する事

## プロジェクト構成とモジュール配置

- `src/` 配下に CLI のエントリーポイント (`cli.ts`)、コマンド実装 (`commands/create.ts`)、開発補助 (`debug.ts`)、国際化ロジック (`i18n.ts`) を配置しています。
- ビルド成果物は `dist/` に出力され、npm パッケージ公開時は `files` 設定でこのディレクトリのみを配布対象とします。
- テスト関連は `test/` に集約し、`helpers/` で Vitest のグローバルセットアップを管理します。テンポラリな検証は `temp/` を使用し、コミット前に掃除してください。

## ビルド・テスト・開発コマンド

- `pnpm dev` は `src/cli.ts` を tsx で実行し、開発モード向けにデバッグログと一時ディレクトリ初期化を確認できます。
- `pnpm build` で TypeScript を `dist/` へトランスパイルし、型宣言も同時に生成します。
- `pnpm test` / `pnpm test:run` は Vitest を対話／一括実行し、`pnpm test:coverage` でカバレッジを算出します。
- `pnpm lint` と `pnpm format` は Biome を用いた静的解析と整形を実行します。CI と同じ設定なのでローカルでエラーを解消してから PR を作成してください。

## コーディングスタイルと命名規則

- TypeScript を採用し、`tsconfig.json` では strict オプションをすべて有効にしています。暗黙の any や未使用変数はビルドエラーになるため都度修正してください。
- インデントは 4 スペースで統一し、CLI メッセージは `i18n.ts` のロケール辞書経由で取得します。新規文言は `getMessages` が返す構造に追加してください。;
- ファイル命名はケバブケース (`create-command.ts`) ではなく、既存に合わせたキャメルケースまたはハイフンなしの複合語 (`create.ts`) を踏襲します。

## テストガイドライン

- ユニットテストは Vitest を用い、対象ファイルに近い `test/` 階層で `*.test.ts` を作成します。セットアップ処理が必要な場合は `test/helpers/global-setup.ts` を拡張してください。
- 新機能では成功経路と主要なエラーパスをカバーし、疑似 CLI 実行が必要な場合は `debug.ts` のユーティリティをモック化します。
- テスト前提条件や追加の環境変数は README ではなく各テストファイルの先頭コメントに明記します。

## コミットとプルリクエストガイドライン

- Git 履歴では `feat(scope): メッセージ` のような Conventional Commits 形式が多用されています。スコープは `tests` や `cli` のように機能単位で指定し、英語ベースの簡潔な要約を推奨します。
- コミットは論理的に分割し、ビルド・テスト・lint が通る状態で残してください。不要なテンポラリファイルは `.gitignore` に従い除外します。
- PR では変更概要、テスト結果（実行したコマンドと結果）、関連 Issue を冒頭に列挙し、CLI 出力など視覚的証拠があればスクリーンショットやログ抜粋を添付してください。
- レビュー依頼前にローカルで `pnpm build && pnpm test && pnpm lint` を実行し、失敗時は原因と再現手順を PR 説明へ追記します。

## ローカル環境とセキュリティの注意

- Node.js 20 以上と pnpm を使用してください。異なるバージョンでは依存関係解決が変化するため、`corepack enable` で pnpm を固定することを推奨します。
- ロケールはデフォルトで OS 設定を尊重します。テストやデバッグで強制したい場合は `FLUORITE_LOCALE=en` のように環境変数を設定してください。
- API キーなどの機密情報は環境変数で扱い、`.env*` は `.gitignore` 済みですが PR に含めないよう確認してください。
