/**
 * Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨READMEãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
 * é–‹ç™ºã‚¬ã‚¤ãƒ‰ã€ã‚³ãƒãƒ³ãƒ‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’å«ã‚€åŒ…æ‹¬çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹
 */

import path from 'node:path';
import fs from 'fs-extra';
import type { ProjectConfig } from '../../../commands/create/types.js';

/**
 * Flutterãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨READMEãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹
 * @param config ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
 */
export async function createFlutterReadme(config: ProjectConfig) {
    const readmeContent = `# ${config.projectName}

A Flutter application generated by fluorite-flake.

## Getting Started

This project is a starting point for a Flutter application with the following features:

- âœ¨ Material Design 3 with dynamic theming
- ğŸ¨ Dark/Light mode support with persistence
- ğŸš€ Go Router for navigation
- ğŸ“± Cross-platform support (iOS, Android, Web, Desktop)
- ğŸ”§ Provider pattern for state management
- ğŸ§ª Unit and widget testing setup

## Prerequisites

Before running this project, ensure you have:

1. **Flutter SDK**: Install from [flutter.dev](https://flutter.dev/docs/get-started/install)
2. **Development Environment**:
   - For Android: Android Studio with Android SDK
   - For iOS: Xcode (macOS only)
   - For Web: Chrome browser
   - For Desktop: Platform-specific requirements

## Development Commands

### Running the App

\`\`\`bash
# Get dependencies
flutter pub get

# Run on connected device/emulator
flutter run

# Run on specific platforms
flutter run -d chrome          # Web
flutter run -d macos           # macOS (macOS only)
flutter run -d windows         # Windows (Windows only)
flutter run -d linux           # Linux (Linux only)
\`\`\`

### Building for Production

\`\`\`bash
# Android
flutter build apk              # Debug APK
flutter build apk --release    # Release APK
flutter build appbundle        # App Bundle for Play Store

# iOS (macOS only)
flutter build ios

# Web
flutter build web

# Desktop
flutter build macos            # macOS (macOS only)
flutter build windows          # Windows (Windows only)
flutter build linux            # Linux (Linux only)
\`\`\`

### Testing and Analysis

\`\`\`bash
# Run tests
flutter test

# Analyze code
flutter analyze

# Format code
dart format .

# Check for outdated dependencies
flutter pub outdated
\`\`\`

## Project Structure

\`\`\`
lib/
â”œâ”€â”€ main.dart              # App entry point
â”œâ”€â”€ screens/               # Screen widgets
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â””â”€â”€ settings_screen.dart
â”œâ”€â”€ widgets/               # Reusable widgets
â”‚   â””â”€â”€ feature_card.dart
â”œâ”€â”€ services/              # Business logic and services
â”‚   â””â”€â”€ theme_service.dart
â”œâ”€â”€ models/                # Data models
â””â”€â”€ utils/                 # Utility functions

test/                      # Test files
assets/                    # Images, fonts, etc.
\`\`\`

## Features

### Theme Management
- Toggle between light and dark modes
- Persistent theme selection using SharedPreferences
- Material Design 3 dynamic color system

### Navigation
- Declarative routing with go_router
- URL-based navigation (great for web)
- Type-safe route management

### State Management
- Provider pattern for reactive state
- Separation of UI and business logic
- Easy testing and maintainability

## Adding Dependencies

Add new dependencies to \`pubspec.yaml\`:

\`\`\`yaml
dependencies:
  flutter:
    sdk: flutter
  your_package: ^version
\`\`\`

Then run:
\`\`\`bash
flutter pub get
\`\`\`

## Contributing

1. Follow the [Dart style guide](https://dart.dev/guides/language/effective-dart/style)
2. Run \`flutter analyze\` before committing
3. Write tests for new features
4. Update documentation as needed

## Learn More

- [Flutter Documentation](https://docs.flutter.dev/)
- [Dart Language](https://dart.dev/)
- [Material Design](https://material.io/)
- [Go Router Package](https://pub.dev/packages/go_router)
- [Provider Package](https://pub.dev/packages/provider)
`;

    await fs.writeFile(path.join(config.projectPath, 'README.md'), readmeContent);
}
